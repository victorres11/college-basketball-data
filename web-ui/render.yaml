services:
  - type: web
    name: cbb-data-generator
    env: python
    buildCommand: |
      cd web-ui && \
      pip install -r requirements.txt && \
      export PLAYWRIGHT_BROWSERS_PATH=/opt/render/project/playwright && \
      mkdir -p /opt/render/project/playwright && \
      python -m playwright install --with-deps chromium
    startCommand: cd web-ui && gunicorn app:app --bind 0.0.0.0:$PORT
    envVars:
      - key: PLAYWRIGHT_BROWSERS_PATH
        value: /opt/render/project/playwright
      - key: CBB_API_KEY
        sync: false
      - key: FLASK_ENV
        value: production
      - key: S3_BUCKET_NAME
        sync: false
      - key: AWS_ACCESS_KEY_ID
        sync: false
      - key: AWS_SECRET_ACCESS_KEY
        sync: false
      - key: AWS_REGION
        value: us-east-1
      - key: KENPOM_USERNAME
        sync: false
      - key: KENPOM_PASSWORD
        sync: false

